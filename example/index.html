<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>j e l l i c u l e   example</title>
        <link rel="stylesheet" href="styles/reset.css">
        <link rel="stylesheet" href="styles/jellicule.css">
        <!-- Hot-reload script -->
        <script>
            // Auto-refresh when components change
            const checkForChanges = () => {
                fetch('components/version.txt?' + new Date().getTime())
                    .then(response => response.text())
                    .then(version => {
                        const currentVersion = localStorage.getItem('jelliculeVersion');
                        if (currentVersion && currentVersion !== version) {
                            console.log('Components updated, refreshing...');
                            location.reload();
                        }
                        localStorage.setItem('jelliculeVersion', version);
                    })
                    .catch(err => console.log('Error checking for updates:', err));
            };

            // Check for changes every 2 seconds
            setInterval(checkForChanges, 2000);
        </script>
        <!-- Import components directly -->
        <script type="module">
            // Import all components
            import './components/layout/ActivityViewport/activity-viewport.js';
            import './components/layout/ActivityBar/activity-bar.js';
            import './components/layout/Activity/activity.js';
            import './components/layout/ActivityResizeButton/activity-resize-button.js';
            import './components/layout/MainContent/main-content.js';
            import './components/layout/Content/content.js';
        </script>
    </head>
    <body>
        <Viewport>
            <ActivityBar orientation="top">
                <ActivityResizeButton></ActivityResizeButton>
                <Activity selected>A</Activity>
                <Activity>B</Activity>
                <Activity>C</Activity>
                <Activity>D</Activity>
            </ActivityBar>
            <ActivityBar orientation="right">
                <ActivityResizeButton></ActivityResizeButton>
                <Activity>A1</Activity>
                <Activity>A2</Activity>
                <Activity selected>A3</Activity>
                <Activity>A4</Activity>
            </ActivityBar>
            <ActivityBar orientation="bottom">
                <ActivityResizeButton></ActivityResizeButton>
                <Activity>A3Z</Activity>
                <Activity>A3Y</Activity>
                <Activity>A3X</Activity>
                <Activity selected>A3W</Activity>
                <Activity>A3V</Activity>
            </ActivityBar>
            <ActivityBar orientation="left">
                <ActivityResizeButton></ActivityResizeButton>
                <Activity>A13W99</Activity>
                <Activity>A13W98</Activity>
                <Activity>A13W97</Activity>
                <Activity>A13W96</Activity>
                <Activity selected active>A13W95</Activity>
            </ActivityBar>
            <MainContent context="e.g.: $ViewPort.context.current, A13W95"></MainContent>
        </Viewport>
        <script src="js/main.js" type="module"></script>
    </body>
</html>